{% extends "base.html" %}

{% block title %}Configuración del Sistema - Four One POS{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2><i class="bi bi-gear"></i> Configuración del Sistema</h2>
    </div>

    <!-- Receipt Logo Configuration -->
    <div class="card">
        <div class="card-header">
            <h5><i class="bi bi-file-earmark-image"></i> Logo del Recibo</h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <p class="text-muted">
                        Personaliza el logo que aparece en los recibos impresos. Se recomienda usar imágenes en formato PNG o JPG con fondo transparente y dimensiones no mayores a 300x100 píxeles.
                    </p>
                    
                    <!-- Current Logo Display -->
                    {% if current_logo %}
                    <div class="mb-4">
                        <h6>Logo Actual:</h6>
                        <div class="border rounded p-3 text-center bg-light">
                            <img src="{{ url_for('static', filename=current_logo.replace('static/', '')) }}" 
                                 alt="Logo actual del recibo" 
                                 style="max-height: 100px; max-width: 300px;"
                                 class="img-fluid">
                        </div>
                    </div>
                    {% else %}
                    <div class="mb-4">
                        <div class="alert alert-info">
                            <i class="bi bi-info-circle"></i> 
                            No hay logo configurado. Se usará el logo por defecto de Four One Solutions.
                        </div>
                    </div>
                    {% endif %}
                    
                    <!-- Upload Form -->
                    <form method="POST" action="{{ url_for('admin.update_logo') }}" enctype="multipart/form-data">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                        <div class="mb-3">
                            <label for="logo_file" class="form-label">Subir Nuevo Logo</label>
                            <input type="file" class="form-control" id="logo_file" name="logo_file" 
                                   accept=".png,.jpg,.jpeg,.gif" required>
                            <div class="form-text">
                                Formatos permitidos: PNG, JPG, JPEG, GIF. Tamaño recomendado: 300x100 píxeles máximo.
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-upload"></i> 
                            {% if current_logo %}Actualizar Logo{% else %}Subir Logo{% endif %}
                        </button>
                    </form>
                    
                    {% if current_logo %}
                    <hr>
                    <form method="POST" action="{{ url_for('admin.remove_logo') }}">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                        <button type="submit" class="btn btn-outline-danger" 
                                onclick="return confirm('¿Estás seguro de que deseas eliminar el logo actual?')">
                            <i class="bi bi-trash"></i> Eliminar Logo Actual
                        </button>
                    </form>
                    {% endif %}
                </div>
                
                <div class="col-md-6">
                    <div class="card border-info">
                        <div class="card-header bg-info text-white">
                            <h6><i class="bi bi-lightbulb"></i> Recomendaciones</h6>
                        </div>
                        <div class="card-body">
                            <ul class="mb-0">
                                <li><strong>Formato:</strong> PNG con fondo transparente para mejor calidad</li>
                                <li><strong>Dimensiones:</strong> Máximo 300x100 píxeles</li>
                                <li><strong>Tamaño:</strong> Menos de 500KB para carga rápida</li>
                                <li><strong>Colores:</strong> Logo en escala de grises para impresión térmica</li>
                                <li><strong>Contraste:</strong> Asegurar buena visibilidad en papel blanco</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="mt-3">
                        <div class="card border-secondary">
                            <div class="card-header">
                                <h6><i class="bi bi-printer"></i> Vista Previa del Recibo</h6>
                            </div>
                            <div class="card-body bg-light" style="font-family: 'Courier New', monospace; font-size: 12px;">
                                <div class="text-center">
                                    {% if current_logo %}
                                    <img src="{{ url_for('static', filename=current_logo.replace('static/', '')) }}" 
                                         alt="Logo del recibo" 
                                         style="max-height: 50px; max-width: 150px;"
                                         class="img-fluid mb-2">
                                    {% else %}
                                    <strong>FOUR ONE SOLUTIONS</strong>
                                    {% endif %}
                                    <br>
                                    <small>=======================</small><br>
                                    <strong>RECIBO DE VENTA</strong><br>
                                    <small>=======================</small><br>
                                    NCF: B0100000001<br>
                                    Fecha: 12/09/2025 14:30<br>
                                    Mesa: 5<br>
                                    <small>-----------------------</small><br>
                                    1x Café Americano    RD$ 120.00<br>
                                    1x Tostada Francesa  RD$ 180.00<br>
                                    <small>-----------------------</small><br>
                                    Subtotal:            RD$ 300.00<br>
                                    ITBIS (18%):         RD$  54.00<br>
                                    <strong>TOTAL:       RD$ 354.00</strong><br>
                                    <small>=======================</small><br>
                                    <small>¡Gracias por su visita!</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}